<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório Fotográfico</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/7.1.0/docx.js"></script>
    <script src="https://unpkg.com/sweetalert2@11"></script>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --background-color: #f9f9f9;
            --card-color: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 0;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        h1, h2, h3 {
            margin-bottom: 1rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        input[type="text"],
        input[type="date"],
        textarea,
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 16px;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            margin-top: 10px;
        }

        button:hover {
            background-color: var(--secondary-color);
        }

        .card {
            background-color: var(--card-color);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }

        .hidden {
            display: none;
        }

        .camera-container {
            position: relative;
            width: 100%;
            height: 300px;
            background-color: #000;
            margin-bottom: 15px;
            border-radius: 8px;
            overflow: hidden;
        }

        #cameraView {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        #capturedImage {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        .camera-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .photo-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .photo-counter {
            font-weight: bold;
        }

        .photo-description {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .geo-info {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 15px;
        }

        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .action-buttons button {
            flex: 1;
            margin: 0 5px;
        }

        .preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .photo-preview {
            width: calc(33.333% - 10px);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            overflow: hidden;
        }

        .photo-preview img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .photo-preview .photo-details {
            padding: 10px;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .checkbox-container input {
            margin-right: 10px;
        }

        .ad-container {
            margin: 20px 0;
            padding: 15px;
            background-color: #f0f0f0;
            border-radius: 8px;
            text-align: center;
        }

        .ad-message {
            font-size: 16px;
            margin-bottom: 10px;
        }

        .ad-progress {
            height: 5px;
            background-color: #ddd;
            border-radius: 5px;
            overflow: hidden;
        }

        .ad-progress-bar {
            height: 100%;
            width: 0;
            background-color: var(--primary-color);
            transition: width 0.3s;
        }

        @media (max-width: 768px) {
            .photo-preview {
                width: calc(50% - 10px);
            }
        }

        @media (max-width: 480px) {
            .photo-preview {
                width: 100%;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .action-buttons button {
                margin: 5px 0;
            }
        }

        /* Estilos para o PDF */
        @media print {
            body {
                background-color: white;
            }
            
            .container {
                max-width: 100%;
                padding: 0;
            }
            
            .card {
                box-shadow: none;
                page-break-inside: avoid;
            }
            
            .photo-preview {
                width: calc(50% - 10px);
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Relatório Fotográfico</h1>
    </header>

    <div class="container">
        <!-- Página Inicial -->
        <div id="initialPage" class="card">
            <h2>Informações do Relatório</h2>
            
            <div class="form-group">
                <label for="logo">Logotipo da Empresa (Opcional)</label>
                <input type="file" id="logo" accept="image/*">
                <div id="logoPreview" class="logo-preview"></div>
            </div>
            
            <div class="form-group">
                <label for="companyName">Nome da Empresa</label>
                <input type="text" id="companyName" required>
            </div>
            
            <div class="form-group">
                <label for="reportTitle">Título do Relatório</label>
                <input type="text" id="reportTitle" required>
            </div>
            
            <div class="form-group">
                <label for="reportObjective">Objetivo do Relatório (Opcional)</label>
                <textarea id="reportObjective" rows="3"></textarea>
            </div>
            
            <div class="form-group">
                <label for="reportLocation">Local</label>
                <input type="text" id="reportLocation" required>
            </div>
            
            <div class="form-group">
                <label for="reportDate">Data</label>
                <input type="date" id="reportDate" required>
            </div>
            
            <div class="checkbox-container">
                <input type="checkbox" id="enableGeolocation">
                <label for="enableGeolocation">Incluir georreferenciamento nas fotos</label>
            </div>
            
            <button id="startReport">Iniciar Relatório</button>
        </div>

        <!-- Página de Captura de Fotos -->
        <div id="capturePage" class="card hidden">
            <h2 id="capturePageTitle">Capturando Fotos</h2>
            
            <div class="camera-container">
                <video id="cameraView" autoplay playsinline></video>
                <img id="capturedImage" alt="Foto capturada">
            </div>
            
            <div class="camera-controls">
                <button id="switchCamera">Trocar Câmera</button>
                <button id="capturePhoto">Capturar Foto</button>
                <button id="retakePhoto" class="hidden">Tirar Novamente</button>
            </div>
            
            <div class="photo-info">
                <div class="photo-counter">Foto <span id="photoCount">0</span> de 50</div>
                <div class="geo-info" id="geoInfo">Georreferenciamento desativado</div>
            </div>
            
            <div class="form-group">
                <label for="photoDescription">Descrição da Foto</label>
                <textarea id="photoDescription" class="photo-description" rows="2"></textarea>
            </div>
            
            <div class="action-buttons">
                <button id="prevPhoto" disabled>Voltar Foto</button>
                <button id="savePhoto" class="hidden">Salvar Foto</button>
                <button id="nextPhoto" disabled>Próxima Foto</button>
            </div>
            
            <div class="preview-container" id="previewContainer"></div>
            
            <div class="action-buttons" style="margin-top: 30px;">
                <button id="newReport">Novo Relatório</button>
                <button id="saveReport">Salvar Relatório</button>
            </div>
        </div>

        <!-- Anúncio -->
        <div id="adContainer" class="ad-container hidden">
            <div class="ad-message">Assistindo anúncio para salvar o relatório...</div>
            <div class="ad-progress">
                <div id="adProgressBar" class="ad-progress-bar"></div>
            </div>
        </div>
    </div>

    <script>
        // Variáveis globais
        let stream = null;
        let photoCount = 0;
        let photos = [];
        let currentPhotoIndex = -1;
        let facingMode = "environment"; // Começa com a câmera traseira
        let geolocationEnabled = false;
        let locationWatchId = null;

        // Elementos DOM
        const initialPage = document.getElementById('initialPage');
        const capturePage = document.getElementById('capturePage');
        const cameraView = document.getElementById('cameraView');
        const capturedImage = document.getElementById('capturedImage');
        const photoCountElement = document.getElementById('photoCount');
        const geoInfoElement = document.getElementById('geoInfo');
        const previewContainer = document.getElementById('previewContainer');
        const adContainer = document.getElementById('adContainer');
        const adProgressBar = document.getElementById('adProgressBar');

        // Botões
        const startReportBtn = document.getElementById('startReport');
        const switchCameraBtn = document.getElementById('switchCamera');
        const capturePhotoBtn = document.getElementById('capturePhoto');
        const retakePhotoBtn = document.getElementById('retakePhoto');
        const savePhotoBtn = document.getElementById('savePhoto');
        const prevPhotoBtn = document.getElementById('prevPhoto');
        const nextPhotoBtn = document.getElementById('nextPhoto');
        const newReportBtn = document.getElementById('newReport');
        const saveReportBtn = document.getElementById('saveReport');

        // Inicialização
        document.addEventListener('DOMContentLoaded', () => {
            // Definir data atual como padrão
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            document.getElementById('reportDate').value = formattedDate;
            
            // Event listeners
            startReportBtn.addEventListener('click', startReport);
            switchCameraBtn.addEventListener('click', switchCamera);
            capturePhotoBtn.addEventListener('click', capturePhoto);
            retakePhotoBtn.addEventListener('click', retakePhoto);
            savePhotoBtn.addEventListener('click', savePhoto);
            prevPhotoBtn.addEventListener('click', showPreviousPhoto);
            nextPhotoBtn.addEventListener('click', showNextPhoto);
            newReportBtn.addEventListener('click', startNewReport);
            saveReportBtn.addEventListener('click', showAdAndSaveReport);
            
            // Listener para o checkbox de georreferenciamento
            document.getElementById('enableGeolocation').addEventListener('change', function() {
                geolocationEnabled = this.checked;
                if (geolocationEnabled) {
                    startGeolocation();
                } else {
                    stopGeolocation();
                    geoInfoElement.textContent = 'Georreferenciamento desativado';
                }
            });
            
            // Listener para o upload de logotipo
            document.getElementById('logo').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const logoPreview = document.getElementById('logoPreview');
                        logoPreview.innerHTML = `<img src="${e.target.result}" style="max-width: 100px; max-height: 100px;">`;
                    };
                    reader.readAsDataURL(file);
                }
            });
        });

        // Funções principais
        function startReport() {
            // Validar campos obrigatórios
            const companyName = document.getElementById('companyName').value;
            const reportTitle = document.getElementById('reportTitle').value;
            const reportLocation = document.getElementById('reportLocation').value;
            const reportDate = document.getElementById('reportDate').value;
            
            if (!companyName || !reportTitle || !reportLocation || !reportDate) {
                Swal.fire({
                    title: 'Erro',
                    text: 'Por favor, preencha todos os campos obrigatórios.',
                    icon: 'error'
                });
                return;
            }
            
            // Atualizar título da página de captura
            const capturePageTitle = document.getElementById('capturePageTitle');
            capturePageTitle.textContent = `${reportTitle} - ${companyName}`;
            
            // Mudar para a página de captura
            initialPage.classList.add('hidden');
            capturePage.classList.remove('hidden');
            
            // Iniciar a câmera
            startCamera();
        }

        function startCamera() {
            if (stream) {
                stopCamera();
            }
            
            const constraints = {
                video: { facingMode: facingMode }
            };
            
            navigator.mediaDevices.getUserMedia(constraints)
                .then(function(mediaStream) {
                    stream = mediaStream;
                    cameraView.srcObject = stream;
                    cameraView.play();
                })
                .catch(function(err) {
                    console.log("Ocorreu um erro: " + err);
                    Swal.fire({
                        title: 'Erro',
                        text: 'Não foi possível acessar a câmera. Verifique as permissões do navegador.',
                        icon: 'error'
                    });
                });
        }

        function stopCamera() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }
        }

        function switchCamera() {
            facingMode = (facingMode === "user") ? "environment" : "user";
            startCamera();
        }

        function capturePhoto() {
            const canvas = document.createElement('canvas');
            canvas.width = cameraView.videoWidth;
            canvas.height = cameraView.videoHeight;
            const context = canvas.getContext('2d');
            context.drawImage(cameraView, 0, 0, canvas.width, canvas.height);
            
            const dataUrl = canvas.toDataURL('image/png');
            capturedImage.src = dataUrl;
            capturedImage.classList.remove('hidden');
            cameraView.classList.add('hidden');
            
            capturePhotoBtn.classList.add('hidden');
            retakePhotoBtn.classList.remove('hidden');
            savePhotoBtn.classList.remove('hidden');
            
            stopCamera(); // Parar a câmera após capturar a foto
        }

        function retakePhoto() {
            capturedImage.classList.add('hidden');
            cameraView.classList.remove('hidden');
            
            capturePhotoBtn.classList.remove('hidden');
            retakePhotoBtn.classList.add('hidden');
            savePhotoBtn.classList.add('hidden');
            
            startCamera(); // Reiniciar a câmera para tirar outra foto
        }

        function savePhoto() {
            const description = document.getElementById('photoDescription').value;
            const timestamp = new Date().toLocaleString();
            let latitude = '';
            let longitude = '';
            
            if (geolocationEnabled && geoInfoElement.dataset.latitude && geoInfoElement.dataset.longitude) {
                latitude = geoInfoElement.dataset.latitude;
                longitude = geoInfoElement.dataset.longitude;
            }

            const photoData = {
                src: capturedImage.src,
                description: description,
                timestamp: timestamp,
                latitude: latitude,
                longitude: longitude
            };

            if (currentPhotoIndex === -1 || currentPhotoIndex === photos.length) {
                // Nova foto ou adicionando no final
                photos.push(photoData);
                currentPhotoIndex = photos.length - 1;
            } else {
                // Editando foto existente
                photos[currentPhotoIndex] = photoData;
            }
            
            updatePhotoDisplay();
            updatePreview();
            
            // Limpar descrição e voltar para a câmera
            document.getElementById('photoDescription').value = '';
            retakePhoto();
        }

        function updatePhotoDisplay() {
            photoCountElement.textContent = photos.length;
            
            // Habilitar/desabilitar botões de navegação
            prevPhotoBtn.disabled = (currentPhotoIndex <= 0);
            nextPhotoBtn.disabled = (currentPhotoIndex >= photos.length - 1);
        }

        function showPreviousPhoto() {
            if (currentPhotoIndex > 0) {
                currentPhotoIndex--;
                loadPhotoForEditing(currentPhotoIndex);
            }
        }

        function showNextPhoto() {
            if (currentPhotoIndex < photos.length - 1) {
                currentPhotoIndex++;
                loadPhotoForEditing(currentPhotoIndex);
            } else if (currentPhotoIndex === photos.length - 1) {
                // Se estiver na última foto e clicar em 


nextPhoto, significa que o usuário quer adicionar uma nova foto
                // Então, resetamos o currentPhotoIndex para -1 para indicar uma nova foto
                currentPhotoIndex = -1;
                document.getElementById("photoDescription").value = "";
                retakePhoto(); // Volta para a câmera para tirar uma nova foto
            }
        }

        function loadPhotoForEditing(index) {
            const photo = photos[index];
            capturedImage.src = photo.src;
            document.getElementById("photoDescription").value = photo.description;
            capturedImage.classList.remove("hidden");
            cameraView.classList.add("hidden");
            
            capturePhotoBtn.classList.add("hidden");
            retakePhotoBtn.classList.remove("hidden");
            savePhotoBtn.classList.remove("hidden");
            
            stopCamera(); // Parar a câmera ao editar uma foto existente
            updatePhotoDisplay();
        }

        function updatePreview() {
            previewContainer.innerHTML = "";
            photos.forEach((photo, index) => {
                const previewItem = document.createElement("div");
                previewItem.classList.add("photo-preview");
                previewItem.innerHTML = `
                    <img src="${photo.src}" alt="Foto ${index + 1}">
                    <div class="photo-details">
                        <p><strong>${index + 1}</strong>: ${photo.description}</p>
                        <p><small>${photo.timestamp}</small></p>
                        ${photo.latitude ? `<p><small>Lat: ${photo.latitude}, Lon: ${photo.longitude}</small></p>` : ''}
                        <button onclick="editPhoto(${index})">Editar</button>
                        <button onclick="deletePhoto(${index})">Excluir</button>
                    </div>
                `;
                previewContainer.appendChild(previewItem);
            });
        }

        function editPhoto(index) {
            currentPhotoIndex = index;
            loadPhotoForEditing(index);
        }

        function deletePhoto(index) {
            Swal.fire({
                title: 'Tem certeza?',
                text: "Você não poderá reverter isso!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Sim, excluir!',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.isConfirmed) {
                    photos.splice(index, 1);
                    if (currentPhotoIndex >= photos.length) {
                        currentPhotoIndex = photos.length - 1;
                    }
                    updatePhotoDisplay();
                    updatePreview();
                    Swal.fire(
                        'Excluída!',
                        'A foto foi excluída.',
                        'success'
                    );
                }
            });
        }

        function startNewReport() {
            Swal.fire({
                title: 'Iniciar Novo Relatório?',
                text: "Todos os dados atuais serão perdidos!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Sim, iniciar novo!',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.isConfirmed) {
                    location.reload(); // Recarrega a página para iniciar um novo relatório
                }
            });
        }

        function showAdAndSaveReport() {
            adContainer.classList.remove("hidden");
            adProgressBar.style.width = "0%";
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                adProgressBar.style.width = `${progress}%`;
                if (progress >= 100) {
                    clearInterval(interval);
                    adContainer.classList.add("hidden");
                    saveReport();
                }
            }, 300); // Simula um anúncio de 3 segundos
        }

        async function saveReport() {
            if (photos.length === 0) {
                Swal.fire({
                    title: 'Atenção',
                    text: 'Nenhuma foto para salvar no relatório.',
                    icon: 'warning'
                });
                return;
            }

            Swal.fire({
                title: 'Salvando Relatório',
                text: 'Por favor, aguarde...', 
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });

            const companyName = document.getElementById("companyName").value;
            const reportTitle = document.getElementById("reportTitle").value;
            const reportObjective = document.getElementById("reportObjective").value;
            const reportLocation = document.getElementById("reportLocation").value;
            const reportDate = document.getElementById("reportDate").value;
            const logoFile = document.getElementById("logo").files[0];
            let logoDataUrl = "";

            if (logoFile) {
                logoDataUrl = await new Promise(resolve => {
                    const reader = new FileReader();
                    reader.onload = (e) => resolve(e.target.result);
                    reader.readAsDataURL(logoFile);
                });
            }

            const content = `
                <div style="font-family: Arial, sans-serif; padding: 20px;">
                    ${logoDataUrl ? `<img src="${logoDataUrl}" style="max-width: 150px; margin-bottom: 20px;">` : ''}
                    <h1 style="color: #3498db;">${reportTitle}</h1>
                    <p><strong>Empresa:</strong> ${companyName}</p>
                    ${reportObjective ? `<p><strong>Objetivo:</strong> ${reportObjective}</p>` : ''}
                    <p><strong>Local:</strong> ${reportLocation}</p>
                    <p><strong>Data:</strong> ${reportDate}</p>
                    <hr style="margin: 30px 0; border: 0; border-top: 1px solid #eee;">
                    ${photos.map((photo, index) => `
                        <div style="margin-bottom: 40px; page-break-inside: avoid;">
                            <h2 style="color: #2980b9;">Foto ${index + 1}</h2>
                            <img src="${photo.src}" style="max-width: 100%; height: auto; display: block; margin-bottom: 10px; border: 1px solid #ddd;">
                            <p><strong>Descrição:</strong> ${photo.description}</p>
                            <p><small><strong>Data/Hora:</strong> ${photo.timestamp}</small></p>
                            ${photo.latitude ? `<p><small><strong>Localização:</strong> Lat: ${photo.latitude}, Lon: ${photo.longitude}</small></p>` : ''}
                        </div>
                    `).join('')}
                </div>
            `;

            // Gerar PDF
            const pdfFilename = `Relatorio_Fotografico_${companyName.replace(/\s/g, '_')}_${reportDate}.pdf`;
            html2pdf().from(content).save(pdfFilename).then(() => {
                Swal.fire(
                    'Salvo!',
                    'O relatório foi salvo como PDF.',
                    'success'
                );
            }).catch(error => {
                console.error('Erro ao gerar PDF:', error);
                Swal.fire(
                    'Erro',
                    'Ocorreu um erro ao salvar o relatório como PDF.',
                    'error'
                );
            });

            // Gerar DOCX (opcional, requer biblioteca docx.js)
            // const docxFilename = `Relatorio_Fotografico_${companyName.replace(/\s/g, '_')}_${reportDate}.docx`;
            // const doc = new docx.Document();
            // doc.addSection({
            //     children: [
            //         new docx.Paragraph({
            //             text: `${reportTitle}`,
            //             heading: docx.HeadingLevel.TITLE,
            //         }),
            //         new docx.Paragraph(`Empresa: ${companyName}`),
            //         new docx.Paragraph(`Local: ${reportLocation}`),
            //         new docx.Paragraph(`Data: ${reportDate}`),
            //         ...photos.map((photo, index) => new docx.Paragraph({
            //             children: [
            //                 new docx.TextRun(`Foto ${index + 1}: ${photo.description}`),
            //                 new docx.ImageRun({
            //                     data: photo.src,
            //                     transformation: {
            //                         width: 500,
            //                         height: 300,
            //                     },
            //                 }),
            //             ],
            //         })),
            //     ],
            // });
            // docx.Packer.toBlob(doc).then(blob => {
            //     saveAs(blob, docxFilename);
            //     console.log('Document created successfully');
            // });
        }

        // Georreferenciamento
        function startGeolocation() {
            if (navigator.geolocation) {
                geoInfoElement.textContent = 'Obtendo localização...';
                locationWatchId = navigator.geolocation.watchPosition(showPosition, showError, { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 });
            } else {
                geoInfoElement.textContent = 'Geolocalização não é suportada por este navegador.';
            }
        }

        function stopGeolocation() {
            if (locationWatchId) {
                navigator.geolocation.clearWatch(locationWatchId);
                locationWatchId = null;
            }
        }

        function showPosition(position) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            geoInfoElement.textContent = `Lat: ${latitude.toFixed(6)}, Lon: ${longitude.toFixed(6)}`;
            geoInfoElement.dataset.latitude = latitude;
            geoInfoElement.dataset.longitude = longitude;
        }

        function showError(error) {
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    geoInfoElement.textContent = 'Usuário negou a solicitação de geolocalização.';
                    break;
                case error.POSITION_UNAVAILABLE:
                    geoInfoElement.textContent = 'Informações de localização indisponíveis.';
                    break;
                case error.TIMEOUT:
                    geoInfoElement.textContent = 'A solicitação para obter a localização expirou.';
                    break;
                case error.UNKNOWN_ERROR:
                    geoInfoElement.textContent = 'Ocorreu um erro desconhecido.';
                    break;
            }
            geolocationEnabled = false; // Desativa o georreferenciamento em caso de erro
            document.getElementById('enableGeolocation').checked = false;
        }
    </script>
</body>
</html>


